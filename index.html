<!DOCTYPE html>
 <html lang="pt-BR">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Clínica Mentalize | Sistema de Agendamentos</title>
     <style>
         /* Seus estilos CSS permanecem os mesmos */
         /* ... */
         body {
             font-family: Arial, sans-serif;
             margin: 0;
             padding: 0;
             background-color: #f5f5f5;
         }
 
         header {
             background-color: #003cff;
             color: #fff;
             padding: 20px 0;
             text-align: center;
         }
 
         header h1 {
             margin: 0;
             font-size: 2.5em;
         }
 
         nav {
             background-color: #fff;
             padding: 15px 0;
             box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
             text-align: center;
         }
 
         nav a {
             color: #003cff;
             text-decoration: none;
             font-weight: bold;
             margin: 0 15px;
             padding: 5px 10px;
             border-radius: 5px;
             transition: background-color 0.3s;
         }
 
         nav a:hover {
             background-color: #003cff;
             color: white;
         }
 
         .container {
             max-width: 1000px;
             margin: 20px auto;
             padding: 0 20px;
         }
 
         .card {
             background-color: white;
             padding: 20px;
             border-radius: 10px;
             box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
             margin-bottom: 20px;
         }
 
         .card h2 {
             color: #003cff;
             border-bottom: 2px solid #003cff;
             padding-bottom: 10px;
         }
 
         form {
             display: flex;
             flex-direction: column;
             gap: 15px;
         }
 
         form input, form select, form textarea {
             padding: 10px;
             border: 1px solid #ddd;
             border-radius: 5px;
             font-size: 1em;
         }
 
         form button {
             background-color: #003cff;
             color: white;
             border: none;
             padding: 12px;
             border-radius: 5px;
             cursor: pointer;
             font-size: 1.1em;
             transition: background-color 0.3s;
         }
 
         form button:hover {
             background-color: #002aa3;
         }
 
         table {
             width: 100%;
             border-collapse: collapse;
             margin-top: 15px;
         }
 
         table th, table td {
             padding: 12px;
             text-align: left;
             border-bottom: 1px solid #ddd;
         }
 
         table th {
             background-color: #003cff;
             color: white;
         }
 
         table tr:hover {
             background-color: #f0f6ff;
         }
 
         footer {
             background-color: #003cff;
             color: #fff;
             text-align: center;
             padding: 15px 0;
             margin-top: 30px;
         }
 
         .login-area {
             text-align: right;
             padding: 10px;
             background-color: #e6f0ff;
         }
 
         .map-container {
             margin-top: 20px;
             border-radius: 10px;
             overflow: hidden;
             box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
         }
 
         .map-container iframe {
             width: 100%;
             height: 400px;
             border: none;
         }
 
         .modal {
             display: none;
             position: fixed;
             z-index: 1000;
             left: 0;
             top: 0;
             width: 100%;
             height: 100%;
             background-color: rgba(0, 0, 0, 0.5);
         }
 
         .modal-content {
             background-color: white;
             margin: 15% auto;
             padding: 25px;
             width: 350px;
             border-radius: 10px;
             box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
         }
 
         .modal h2 {
             color: #003cff;
             text-align: center;
             margin-bottom: 20px;
         }
 
         .close {
             color: #aaa;
             float: right;
             font-size: 28px;
             cursor: pointer;
         }
 
         .close:hover {
             color: #003cff;
         }
 
         .error-message {
             color: red;
             text-align: center;
             margin-top: 10px;
             font-size: 0.9em;
         }
 
         #areaProfissional {
             display: none;
         }
 
         .logout-btn {
             background-color: #ff3c00;
             color: white;
             border: none;
             padding: 8px 15px;
             border-radius: 5px;
             cursor: pointer;
             margin-left: 10px;
         }
 
         /* Novos estilos adicionados */
         .cancelar-btn {
             background-color: #ff3c00;
             color: white;
             border: none;
             padding: 5px 10px;
             border-radius: 3px;
             cursor: pointer;
         }
         
         .cancelar-btn:hover {
             background-color: #cc3000;
         }
         
         #agendamentoSucesso {
             display: none;
             margin-top: 15px;
             padding: 10px;
             background-color: #d4edda;
             color: #155724;
             border-radius: 5px;
         }
         
         #agendamentoErro {
             display: none;
             margin-top: 15px;
             padding: 10px;
             background-color: #f8d7da;
             color: #721c24;
             border-radius: 5px;
         }
     </style>
 </head>
 <body>
     <header>
         <h1>Clínica Mentalize</h1>
         <p>Atendimento Psicológico</p>
     </header>
 
     <div class="login-area">
         <span id="userGreeting"></span>
         <a href="#" id="loginLink">Área do Profissional</a>
         <button id="logoutBtn" class="logout-btn">Sair</button>
     </div>
 
     <!-- Seu HTML permanece o mesmo até o formulário de agendamento -->
     <!-- ... -->
     <nav>
         <a href="#agendamento">Agendamentos</a>
         <a href="#prontuario">Prontuários</a>
         <a href="#pacientes">Pacientes</a>
         <a href="#localizacao">Localização</a>
         <a href="#contato">Contato</a>
     </nav>
 
     <div class="container">
         <!-- Área Pública -->
         <div id="areaPublica">
             <!-- Seção de Agendamento -->
             <section id="agendamento" class="card">
                 <h2>Agendar Consulta</h2>
                 <form id="formAgendamento">
                     <input type="text" id="nomePaciente" placeholder="Nome do Paciente" required>
                     <input type="date" id="dataConsulta" required>
                     <input type="time" id="horaConsulta" required>
                     <select id="profissional" required>
                         <option value="">Selecione o Profissional</option>
                         <option value="psicologo1">Dra. Cicera Santana</option>
                     </select>
                     <textarea id="observacoes" placeholder="Observações" rows="3"></textarea>
                     <button type="submit">Agendar Consulta</button>
                 </form>
                 <div id="agendamentoSucesso" style="display: none; margin-top: 15px; padding: 10px; background-color: #d4edda; color: #155724; border-radius: 5px;">
                     Agendamento realizado com sucesso!
                 </div>
                 <div id="agendamentoErro" style="display: none; margin-top: 15px; padding: 10px; background-color: #f8d7da; color: #721c24; border-radius: 5px;">
                 <div id="agendamentoSucesso">Agendamento realizado com sucesso!</div>
                 <div id="agendamentoErro"></div>
             </section>
 
             <section id="localizacao" class="card">
                 <h2>Onde Estamos</h2>
                 <p><strong>Endereço:</strong> R. Progresso, 735 - Centro, Francisco Morato - SP, 07901-080/SP</p>
                 <div class="map-container">
                     <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3657.1975844558826!2d-46.7434858!3d-23.2844697!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x94cee7e0d3c98ae1%3A0x33f7316f02eba800!2sMentalize%20Psicologia!5e0!3m2!1spt-BR!2sbr!4v1711927371234!5m2!1spt-BR!2sbr" allowfullscreen loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                 </div>
             </section>
 
             <!-- Restante do seu HTML permanece o mesmo -->
             <!-- ... -->
             <section id="contato" class="card">
                 <h2>Contato</h2>
                 <p><strong>Telefone:</strong> (11) 96331-3561</p>
                 <p><strong>E-mail:</strong> contato@clinicamentalize.com.br</p>
             </section>
         </div>
 
         <!-- Área do Profissional -->
         <div id="areaProfissional">
             <section class="card">
                 <h2>Bem-vindo, <span id="profissionalNome"></span></h2>
                 <p>Últimos agendamentos:</p>
                 <p>Agendamentos:</p>
                 <table id="tabelaAgendamentos">
                     <thead>
                         <tr>
                             <th>Paciente</th>
                             <th>Data</th>
                             <th>Hora</th>
                             <th>Profissional</th>
                             <th>Observações</th>
                             <th>Ações</th>
                         </tr>
                     </thead>
                     <tbody>
                         <!-- Os agendamentos serão inseridos aqui dinamicamente -->
                     <tbody id="corpoTabela">
                         <!-- Agendamentos serão inseridos aqui -->
                     </tbody>
                 </table>
             </section>
 
             <!-- Restante do HTML da área profissional -->
             <!-- ... -->
         </div>
     </div>
 
     <!-- Modal de Login -->
     <!-- ... -->
     <div id="loginModal" class="modal">
         <div class="modal-content">
             <span class="close">&times;</span>
             <h2>Acesso Restrito</h2>
             <form id="loginForm">
                 <input type="text" id="username" placeholder="Usuário" required>
                 <input type="password" id="password" placeholder="Senha" required>
                 <button type="submit">Entrar</button>
             </form>
             <p id="errorMessage" class="error-message"></p>
         </div>
     </div>
 
     <footer>
         <p>© Clínica Mentalize | Atendimento Psicológico - Todos os direitos reservados</p>
     </footer>
 
     <script>
         // Armazenamento de agendamentos
         let agendamentos = JSON.parse(localStorage.getItem('agendamentos')) || [];
 
         // Controle do Login (seu código existente)
         document.addEventListener('DOMContentLoaded', function() {
             // Elementos do DOM
             const formAgendamento = document.getElementById('formAgendamento');
             const corpoTabela = document.getElementById('corpoTabela');
             const agendamentoSucesso = document.getElementById('agendamentoSucesso');
             const agendamentoErro = document.getElementById('agendamentoErro');
             const modal = document.getElementById('loginModal');
             const loginLink = document.getElementById('loginLink');
             const logoutBtn = document.getElementById('logoutBtn');
             const closeBtn = document.querySelector('.close');
             const loginForm = document.getElementById('loginForm');
             const errorMessage = document.getElementById('errorMessage');
             const areaPublica = document.getElementById('areaPublica');
             const areaProfissional = document.getElementById('areaProfissional');
             const userGreeting = document.getElementById('userGreeting');
             const profissionalNome = document.getElementById('profissionalNome');
             const formAgendamento = document.getElementById('formAgendamento');
             const agendamentoSucesso = document.getElementById('agendamentoSucesso');
             const agendamentoErro = document.getElementById('agendamentoErro');
 
             // Credenciais válidas (simuladas)
             // Credenciais válidas
             const validUsers = {
                 'cicera.santana': { password: 'senha123', nome: 'Dra. Cicera Santana' },
             };
 
             // Verificar se já está logado (simulação)
             // Verificar login ao carregar
             checkLogin();
 
             // Abrir modal
             // Evento de login
             loginLink.addEventListener('click', function(e) {
                 e.preventDefault();
                 modal.style.display = 'block';
             });
 
             // Fechar modal
             closeBtn.addEventListener('click', closeModal);
             window.addEventListener('click', function(e) {
                 if (e.target === modal) closeModal();
             });
 
             // Logout
             logoutBtn.addEventListener('click', function() {
                 localStorage.removeItem('loggedInUser');
                 checkLogin();
             });
 
             // Validação de login
             loginForm.addEventListener('submit', function(e) {
                 e.preventDefault();
                 const username = document.getElementById('username').value.trim();
                 const password = document.getElementById('password').value;
 
                 if (validUsers[username] && validUsers[username].password === password) {
                     // Login bem-sucedido
                     localStorage.setItem('loggedInUser', JSON.stringify({
                         username: username,
                         nome: validUsers[username].nome
                     }));
                     closeModal();
                     checkLogin();
                     atualizarTabelaAgendamentos();
                 } else {
                     errorMessage.textContent = 'Usuário ou senha incorretos!';
                 }
             });
 
             // Formulário de agendamento
             formAgendamento.addEventListener('submit', function(e) {
                 e.preventDefault();
 
                 const nomePaciente = document.getElementById('nomePaciente').value;
                 const dataConsulta = document.getElementById('dataConsulta').value;
                 const horaConsulta = document.getElementById('horaConsulta').value;
                 const profissional = document.getElementById('profissional').value;
                 const observacoes = document.getElementById('observacoes').value;
 
                 // Validar data (não pode ser no passado)
                 const hoje = new Date();
                 // Validar data/hora
                 const dataAtual = new Date();
                 const dataAgendamento = new Date(dataConsulta + 'T' + horaConsulta);
 
                 if (dataAgendamento < hoje) {
                     agendamentoErro.textContent = 'Não é possível agendar para datas/horários passados.';
                     agendamentoErro.style.display = 'block';
                     agendamentoSucesso.style.display = 'none';
                 if (dataAgendamento < dataAtual) {
                     mostrarErro('Não é possível agendar para datas/horários passados.');
                     return;
                 }
 
                 // Criar novo agendamento
                 const novoAgendamento = {
                     id: Date.now(), // ID único baseado no timestamp
                     id: Date.now(),
                     paciente: nomePaciente,
                     data: dataConsulta,
                     hora: horaConsulta,
                     profissional: profissional,
                     observacoes: observacoes,
                     status: 'agendado'
                 };
 
                 // Adicionar ao array de agendamentos
                 // Adicionar e salvar
                 agendamentos.push(novoAgendamento);
                 
                 // Salvar no localStorage
                 localStorage.setItem('agendamentos', JSON.stringify(agendamentos));
 
                 // Feedback para o usuário
                 agendamentoSucesso.style.display = 'block';
                 agendamentoErro.style.display = 'none';
                 
                 // Limpar formulário
                 // Feedback
                 mostrarSucesso();
                 formAgendamento.reset();
 
                 // Atualizar tabela se estiver na área profissional
                 // Atualizar tabela se visível
                 if (areaProfissional.style.display === 'block') {
                     atualizarTabelaAgendamentos();
                     atualizarTabela();
                 }
                 
                 // Esconder mensagem de sucesso após 3 segundos
             });
 
             function mostrarSucesso() {
                 agendamentoSucesso.style.display = 'block';
                 agendamentoErro.style.display = 'none';
                 setTimeout(() => {
                     agendamentoSucesso.style.display = 'none';
                 }, 3000);
             });
 
             function closeModal() {
                 modal.style.display = 'none';
                 errorMessage.textContent = '';
                 loginForm.reset();
             }
 
             function checkLogin() {
                 const user = JSON.parse(localStorage.getItem('loggedInUser'));
                 if (user) {
                     // Usuário logado
                     loginLink.style.display = 'none';
                     logoutBtn.style.display = 'inline-block';
                     userGreeting.textContent = `Olá, ${user.nome.split(' ')[1]}!`;
                     profissionalNome.textContent = user.nome;
                     areaPublica.style.display = 'none';
                     areaProfissional.style.display = 'block';
                     atualizarTabelaAgendamentos();
                 } else {
                     // Usuário não logado
                     loginLink.style.display = 'inline-block';
                     logoutBtn.style.display = 'none';
                     userGreeting.textContent = '';
                     areaPublica.style.display = 'block';
                     areaProfissional.style.display = 'none';
                 }
             
             function mostrarErro(mensagem) {
                 agendamentoErro.textContent = mensagem;
                 agendamentoErro.style.display = 'block';
                 agendamentoSucesso.style.display = 'none';
             }
 
             function atualizarTabelaAgendamentos() {
                 const tabela = document.querySelector('#tabelaAgendamentos tbody');
                 tabela.innerHTML = '';
             function atualizarTabela() {
                 corpoTabela.innerHTML = '';
 
                 // Ordenar agendamentos por data e hora (mais recentes primeiro)
                 // Ordenar por data/hora
                 const agendamentosOrdenados = [...agendamentos].sort((a, b) => {
                     const dataA = new Date(a.data + 'T' + a.hora);
                     const dataB = new Date(b.data + 'T' + b.hora);
                     return dataA - dataB;
                     return new Date(a.data + 'T' + a.hora) - new Date(b.data + 'T' + b.hora);
                 });
 
                 agendamentosOrdenados.forEach(agendamento => {
                     const tr = document.createElement('tr');
 
                     // Formatando a data para exibição (DD/MM/AAAA)
                     const dataParts = agendamento.data.split('-');
                     const dataFormatada = `${dataParts[2]}/${dataParts[1]}/${dataParts[0]}`;
                     // Formatar data (DD/MM/AAAA)
                     const [ano, mes, dia] = agendamento.data.split('-');
                     const dataFormatada = `${dia}/${mes}/${ano}`;
 
                     tr.innerHTML = `
                         <td>${agendamento.paciente}</td>
                         <td>${dataFormatada}</td>
                         <td>${agendamento.hora}</td>
                         <td>${agendamento.profissional === 'psicologo1' ? 'Dra. Cicera Santana' : agendamento.profissional}</td>
                         <td>${agendamento.observacoes || '-'}</td>
                         <td>
                             <button class="cancelar-btn" data-id="${agendamento.id}">Cancelar</button>
                         </td>
                     `;
 
                     tabela.appendChild(tr);
                     corpoTabela.appendChild(tr);
                 });
 
                 // Adicionar eventos aos botões de cancelar
                 document.querySelectorAll('.cancelar-btn').forEach(btn => {
                     btn.addEventListener('click', function() {
                 // Eventos para botões de cancelar
                 document.querySelectorAll('.cancelar-btn').forEach(botao => {
                     botao.addEventListener('click', function() {
                         const id = parseInt(this.getAttribute('data-id'));
                         cancelarAgendamento(id);
                     });
                 });
             }
 
             function cancelarAgendamento(id) {
                 if (confirm('Tem certeza que deseja cancelar este agendamento?')) {
                     agendamentos = agendamentos.filter(ag => ag.id !== id);
                     localStorage.setItem('agendamentos', JSON.stringify(agendamentos));
                     atualizarTabelaAgendamentos();
                     atualizarTabela();
                 }
             }
             
             function checkLogin() {
                 const user = JSON.parse(localStorage.getItem('loggedInUser'));
                 if (user) {
                     loginLink.style.display = 'none';
                     logoutBtn.style.display = 'inline-block';
                     userGreeting.textContent = `Olá, ${user.nome.split(' ')[1]}!`;
                     profissionalNome.textContent = user.nome;
                     areaPublica.style.display = 'none';
                     areaProfissional.style.display = 'block';
                     atualizarTabela();
                 } else {
                     loginLink.style.display = 'inline-block';
                     logoutBtn.style.display = 'none';
                     userGreeting.textContent = '';
                     areaPublica.style.display = 'block';
                     areaProfissional.style.display = 'none';
                 }
             }
             
             function closeModal() {
                 modal.style.display = 'none';
                 errorMessage.textContent = '';
                 loginForm.reset();
             }
         });
     </script>
 </body>
 </html>
 </html>
